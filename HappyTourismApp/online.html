<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Offline Guide App</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  /* Smooth sliding indicator */
  .indicator {
    transition: all 0.3s ease;
  }
</style>
</head>
<body class="bg-gray-50 min-h-screen">

<!-- Header -->
<div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6">
  <h1 class="text-3xl font-bold text-center mb-4">Offline Guide App</h1>

  <!-- City Selector -->
  <div class="relative flex justify-center mb-4">
    <div class="absolute bottom-0 h-1 bg-white rounded indicator" id="cityIndicator"></div>
    <button id="hyderabadBtn" class="px-4 py-2 mx-1 rounded text-white font-semibold relative">Hyderabad</button>
    <button id="chennaiBtn" class="px-4 py-2 mx-1 rounded text-white font-semibold relative">Chennai</button>
  </div>

  <!-- Search Bar -->
  <div class="relative max-w-md mx-auto">
    <input type="text" id="searchInput" placeholder="Search rooms or restaurants..." 
           class="w-full pl-4 pr-4 py-2 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-white/50"/>
  </div>
</div>

<!-- Tabs -->
<div class="bg-white shadow-sm">
  <div class="max-w-6xl mx-auto px-4">
    <div class="relative flex">
      <div class="absolute bottom-0 h-1 bg-blue-600 rounded indicator" id="tabIndicator"></div>
      <button id="roomsTab" class="flex-1 py-3 border-b-2 border-transparent text-blue-600 font-semibold relative">Rooms</button>
      <button id="restaurantsTab" class="flex-1 py-3 border-b-2 border-transparent text-gray-500 hover:text-gray-700 relative">Restaurants</button>
    </div>
  </div>
</div>

<!-- Content -->
<div class="max-w-6xl mx-auto px-4 py-6">
  <div id="cardsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <!-- Cards will render here -->
  </div>
</div>

<!-- Footer -->
<div class="bg-gray-800 text-white text-center py-4 mt-12">
  <p class="text-sm">Real-time pricing and availability • Last updated: <span id="lastUpdated"></span></p>
  <p class="text-xs text-gray-400 mt-1">Data refreshes automatically every 30 seconds</p>
</div>

<script>
const mockData = {
  hyderabad: {
    rooms: [
      {name:"ITC Kohenur Room", price:8500, currency:"₹", availability:"3 rooms left", location:"Madhapur", image:"https://images.unsplash.com/photo-1564501049412-61c2a3083791?w=400&h=250&fit=crop"},
      {name:"Park Hyatt Room", price:12000, currency:"₹", availability:"1 room left", location:"Banjara Hills", image:"https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=400&h=250&fit=crop"}
    ],
    restaurants: [
      {name:"Jewel of Nizam", cuisine:"Hyderabadi", avgCost:1200, currency:"₹", availability:"Table available", location:"Golkonda Hotel", image:"https://images.unsplash.com/photo-1585937421612-70a008356fbe?w=400&h=250&fit=crop"},
      {name:"Bawarchi", cuisine:"Hyderabadi", avgCost:400, currency:"₹", availability:"15 min wait", location:"RTC X Roads", image:"https://images.unsplash.com/photo-1563379091339-03246963d4d6?w=400&h=250&fit=crop"}
    ]
  },
  chennai: {
    rooms: [
      {name:"ITC Grand Chola Room", price:11000, currency:"₹", availability:"2 rooms left", location:"Guindy", image:"https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=400&h=250&fit=crop"},
      {name:"The Leela Palace Room", price:13500, currency:"₹", availability:"4 rooms left", location:"Adyar", image:"https://images.unsplash.com/photo-1566073771259-6a8506099945?w=400&h=250&fit=crop"}
    ],
    restaurants: [
      {name:"Dakshin", cuisine:"South Indian", avgCost:1800, currency:"₹", availability:"Table available", location:"ITC Grand Chola", image:"https://images.unsplash.com/photo-1567337712385-da821300b3eb?w=400&h=250&fit=crop"},
      {name:"Murugan Idli Shop", cuisine:"South Indian", avgCost:200, currency:"₹", availability:"No wait", location:"T. Nagar", image:"https://images.unsplash.com/photo-1589301760014-d929f3979dbc?w=400&h=250&fit=crop"}
    ]
  }
};

let city = 'hyderabad';
let tab = 'rooms';
const cardsContainer = document.getElementById('cardsContainer');
const searchInput = document.getElementById('searchInput');
const lastUpdated = document.getElementById('lastUpdated');

const cityIndicator = document.getElementById('cityIndicator');
const cityButtons = [document.getElementById('hyderabadBtn'), document.getElementById('chennaiBtn')];

const tabIndicator = document.getElementById('tabIndicator');
const tabButtons = [document.getElementById('roomsTab'), document.getElementById('restaurantsTab')];

// Move city underline
function moveCityIndicator(activeBtn){
  const rect = activeBtn.getBoundingClientRect();
  const parentRect = activeBtn.parentElement.getBoundingClientRect();
  cityIndicator.style.width = rect.width + "px";
  cityIndicator.style.left = rect.left - parentRect.left + "px";
}

// Move tab underline
function moveTabIndicator(activeBtn){
  const rect = activeBtn.getBoundingClientRect();
  const parentRect = activeBtn.parentElement.getBoundingClientRect();
  tabIndicator.style.width = rect.width + "px";
  tabIndicator.style.left = rect.left - parentRect.left + "px";
}

// Render cards
function renderCards() {
  let data = mockData[city][tab];
  const query = searchInput.value.toLowerCase();
  const filtered = data.filter(d => d.name.toLowerCase().includes(query) || d.location.toLowerCase().includes(query));

  cardsContainer.innerHTML = '';
  if(filtered.length===0){
    cardsContainer.innerHTML='<p class="col-span-3 text-center text-gray-400 py-12">No results found.</p>';
    return;
  }

  filtered.forEach(item=>{
    const card = document.createElement('div');
    card.className='bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow';
    card.innerHTML=`
      <img src="${item.image}" alt="${item.name}" class="w-full h-48 object-cover">
      <div class="p-4">
        <h3 class="font-bold text-lg mb-1">${item.name}</h3>
        <p class="text-sm text-gray-600 mb-2">${item.location}</p>
        ${tab==='rooms'
          ? `<p class="text-green-600 font-semibold">${item.currency}${item.price} / night</p>` 
          : `<p class="text-green-600 font-semibold">${item.currency}${item.avgCost} / person</p>`}
        <p class="text-gray-500 text-sm mt-1">${item.availability}</p>
      </div>
    `;
    cardsContainer.appendChild(card);
  });

  lastUpdated.textContent = new Date().toLocaleTimeString();
}

// City click events
cityButtons.forEach(btn=>{
  btn.addEventListener('click',()=>{
    city = btn.id==='hyderabadBtn'?'hyderabad':'chennai';
    renderCards();
    moveCityIndicator(btn);
  });
});

// Tab click events
tabButtons.forEach(btn=>{
  btn.addEventListener('click',()=>{
    tab = btn.id==='roomsTab'?'rooms':'restaurants';
    renderCards();
    moveTabIndicator(btn);
  });
});

// Search input
searchInput.addEventListener('input', renderCards);

// Initialize
renderCards();
moveCityIndicator(document.getElementById('hyderabadBtn'));
moveTabIndicator(document.getElementById('roomsTab'));

// Auto-refresh every 30 seconds
setInterval(renderCards, 30000);
</script>

</body>
</html>
